<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="https://devold.aicati.com/script/call.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div style="padding: 10px;display: flex;align-items: center;">
			<input type="text" style="padding: 6px;margin-right: 10px;" id="callNumber_demo" placeholder="呼叫号码">
			<input type="text" style="padding: 6px;margin-right: 10px;" id="callerNumber_demo" placeholder="主叫号码（可不输入）">
			<input type="button" style="padding: 4px 14px;margin-right: 10px;" onclick="callNumberFun()" value="呼叫">
			<input type="button" style="padding: 4px 14px;" onclick="callHangUpFun()" value="挂断">
		</div>
		<div id="callContent"></div>
	</body>
	<script>
		//初始化
		//initSDK方法的信息返回格式：{state:0,message:""}
		//state 状态，1是成功，0是失败
		//message  消息内容
		var initInfo = initSDK({
			container: "callContent",//容器id，如果容器id为空，那么不会显示界面
			userid: '100001',//用户标识，必传，坐席号
			siptype: 2,//启动的SIP类型，0是initSDK方法会返回sip信息（webrtc），1是启动软件SIP，2是启动网页SIP
			appkey: '2aea3af8-4d52-4f37-accf-edb2ac648a01',//在商户的系统设置下的接口配置页面，点击重置按钮，或获取到token
			secret: 'a8b2914aa528404a84fd2939ddc62b5e',//在商户的系统设置下的接口配置页面 secret
			ruleid: "",//指定呼叫时执行的任务id，没传任务id，则执行任务列表中的第一个任务
			cdrHandler: cdrInfoHandle//处理返回的cdr信息的方法
		});
		console.log("initInfo:" + JSON.stringify(initInfo))
		//处理返回的cdr信息的方法
		//state 呼叫状态，0（正在呼叫），1（已接通），9（已挂断）
		//cdrInfo  cdr信息
		function cdrInfoHandle(state,cdrInfo){
			console.log("cdrInfoHandle:" + state)
			console.log("cdrInfoHandle:" + JSON.stringify(cdrInfo))
		}
		
		//点击呼叫按钮的执行方法
		function callNumberFun(){
			var callNumber=document.getElementById('callNumber_demo').value;
			var callerNumber=document.getElementById('callerNumber_demo').value;
			//执行呼叫方法  callNumber是呼叫号码，callerNumber是主叫号码
			//agentCallFun方法的信息返回格式：{state:0,message:""}
			//state 状态，1是成功，0是失败
			//message  消息内容
			var agentCallInfo= agentCallFun(callNumber,callerNumber);
			console.log("agentCallInfo:" + JSON.stringify(agentCallInfo))
		}
		//点击挂断按钮的执行方法
		function callHangUpFun(){
			//执行挂断方法
			//hangUpFun方法的信息返回格式：{state:0,message:""}
			//state 状态，1是成功，0是失败
			//message  消息内容
			var hangUpInfo= hangUpFun();
			console.log("hangUpInfo:" + JSON.stringify(hangUpInfo))
		}
	</script>
</html>
